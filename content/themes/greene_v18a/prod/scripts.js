"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),addEvents={toClass:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.trigger,n=e.target,a=void 0===n?null:n,l=e.type,s=void 0===l?"click":l,i=e.callback,o=document.getElementsByClassName(t);o&&o.length>0&&Array.prototype.forEach.call(o,function(e){e.addEventListener(s,function(e){e.preventDefault();var t=document.getElementById(a);i(o,t)})})},toID:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.trigger,n=e.target,a=void 0===n?null:n,l=e.type,s=void 0===l?"click":l,i=e.callback,o=document.getElementById(t);o&&o.addEventListener(s,function(e){e.preventDefault();var t=document.getElementById(a);i(o,t)})}},delay=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250;setTimeout(function(){e()},t)},SVGAnimate=function(e){e&&e.forEach(function(e){document.getElementById(e).beginElement()})},hamburger={open:function(){SVGAnimate(["hambar-open-1t","hambar-open-2t","hambar-open-3t","hambar-open-4t","hambar-open-1b","hambar-open-2b","hambar-open-3b","hambar-open-4b"])},close:function(){SVGAnimate(["hambar-close-1t","hambar-close-2t","hambar-close-3t","hambar-close-4t","hambar-close-1b","hambar-close-2b","hambar-close-3b","hambar-close-4b"])}},navEvent=function(){addEvents.toID({trigger:"ham",target:"head",callback:function(e,t){t.classList.contains("toggle")?(hamburger.close(),t.classList.toggle("toggle"),delay(function(){return t.classList.toggle("pre")})):(t.classList.toggle("pre"),t.classList.toggle("toggle"),hamburger.open())}})},SlideShow=function(){function e(t){var n=t.target,a=t.timer,l=void 0===a?6e3:a,s=t.pause,i=void 0!==s&&s,o=t.currentIndx,r=void 0===o?0:o;_classCallCheck(this,e),Object.assign(this,{timer:l,pause:i,currentIndx:r}),this.$galleryWrapper=n,this.assembleDOMElements(),this.setEventListeners(),this.assemblePos(),this.calculateInterval()}return _createClass(e,[{key:"start",value:function(){this.countDown()}},{key:"assembleDOMElements",value:function(){var e=this,t=this.$galleryWrapper.childNodes;Array.prototype.forEach.call(t,function(t){var n=t.classList;"DIV"===t.tagName&&(n.contains("gallery")?(e.$gallery=t,e.slides=e.assembleSlides(),e.length=e.slides.length,e.indx=0):n.contains("prev")?e.$bttnPrev=t:n.contains("next")&&(e.$bttnNext=t))})}},{key:"setEventListeners",value:function(){var e=this;this.$bttnPrev.addEventListener("click",function(t){t.preventDefault(),e.changeSlide("left")}),this.$bttnNext.addEventListener("click",function(t){t.preventDefault(),e.changeSlide("right")})}},{key:"assemblePos",value:function(){var e=this.findNextSlideIndx(),t=this.slides[e];console.log("next slide",t),this.nextPos=t.getBoundingClientRect().left}},{key:"assembleSlides",value:function(){var e=this.$gallery.childNodes;return Array.prototype.filter.call(e,function(e){return"DIV"===e.tagName})}},{key:"findNextSlideIndx",value:function(){return this.indx+1<=this.length-1?this.indx+1:0}},{key:"calculateInterval",value:function(){var e=this.$gallery.getBoundingClientRect();this.offset=e.left-e.width,this.interval=(this.nextPos-this.offset-this.$gallery.scrollLeft)/20}},{key:"moveForward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1;console.log("forward triggered",this.nextPos),this.$gallery.scrollLeft+this.interval<this.nextPos-this.offset?(this.$gallery.scrollLeft+=this.interval,this.indx+=1,setTimeout(this.moveForward.bind(this,e+.1),18)):(this.$gallery.scrollLeft=this.nextPos-this.offset,this.nextPos=this.assemblePos())}},{key:"moveBackward",value:function(){console.log("this is never used",this.galleryWidth)}},{key:"changeSlide",value:function(e){switch(e){case"left":this.setPause(),this.moveBackward();break;case"right":this.setPause(),this.moveForward();break;default:this.changeSlide()}}},{key:"checkLength",value:function(){this.$gallery.scrollLeft<0?this.$gallery.scrollLeft=this.galleryWidth:this.$gallery.scrollLeft>this.galleryWidth&&(this.$gallery.scrollLeft=0)}},{key:"setPause",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6e3;this.pause||(this.pause=!0,setTimeout(function(){e.pause=!1},t))}},{key:"resetTime",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6e3;this.timer=e}},{key:"spendTime",value:function(){this.timer-=1e3}},{key:"countDown",value:function(){0===this.timer?(this.next(),this.changeSlide(),this.resetTime()):this.pause||this.spendTime(),setTimeout(this.countDown.bind(this),1e3)}},{key:"default",value:function(){var e=this;this.$gallery.addEventListener("scroll",function(){console.log("XX--\x3e",e.$gallery.scrollLeft)})}}]),e}(),initSlider=function(){var e={},t=document.getElementsByClassName("gallery-wrapper");Array.prototype.forEach.call(t,function(t){e["gal-0"]=new SlideShow({target:t}),e["gal-0"].default()})},toggleEl={add:function(e){e.classList.add("pre"),delay(function(){return e.classList.add("opacity")})},remove:function(e){e.classList.remove("opacity"),delay(function(){return e.classList.remove("pre")})},status:function(e){return e.classList.contains("pre")&&e.classList.contains("opacity")}},toggleTabs=function(){var e=document.getElementsByClassName("tabs"),t=document.getElementById("comp-schedule"),n=document.getElementById("comp-available");Array.prototype.forEach.call(e,function(a){a.addEventListener("click",function(l){l.preventDefault(),Array.prototype.forEach.call(e,function(e){e.classList.remove("tabbed")}),a.classList.contains("schedule-link")?toggleEl.status(t)?toggleEl.remove(t):(toggleEl.remove(n),toggleEl.add(t),a.classList.add("tabbed")):a.classList.contains("available-link")&&(toggleEl.status(n)?toggleEl.remove(n):(toggleEl.remove(t),toggleEl.add(n),a.classList.add("tabbed")))})})};document.onreadystatechange=function(){"complete"===document.readyState&&(navEvent(),initSlider(),toggleTabs())};