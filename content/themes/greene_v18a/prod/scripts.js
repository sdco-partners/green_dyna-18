"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),addEvents={toClass:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.trigger,a=e.target,n=void 0===a?null:a,s=e.type,l=void 0===s?"click":s,i=e.callback,o=document.getElementsByClassName(t);o&&o.length>0&&Array.prototype.forEach.call(o,function(e){e.addEventListener(l,function(e){e.preventDefault();var t=document.getElementById(n);i(o,t)})})},toID:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.trigger,a=e.target,n=void 0===a?null:a,s=e.type,l=void 0===s?"click":s,i=e.callback,o=document.getElementById(t);o&&o.addEventListener(l,function(e){e.preventDefault();var t=document.getElementById(n);i(o,t)})}},delay=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250;setTimeout(function(){e()},t)},SVGAnimate=function(e){e&&e.forEach(function(e){document.getElementById(e).beginElement()})},hamburger={open:function(){SVGAnimate(["hambar-open-1t","hambar-open-2t","hambar-open-3t","hambar-open-4t","hambar-open-1b","hambar-open-2b","hambar-open-3b","hambar-open-4b"])},close:function(){SVGAnimate(["hambar-close-1t","hambar-close-2t","hambar-close-3t","hambar-close-4t","hambar-close-1b","hambar-close-2b","hambar-close-3b","hambar-close-4b"])}},navEvent=function(){var e=document.getElementsByTagName("BODY")[0];addEvents.toID({trigger:"ham",target:"head",callback:function(t,a){a.classList.contains("toggle")?(hamburger.close(),a.classList.remove("toggle"),e.classList.remove("lock"),delay(function(){return a.classList.remove("pre")})):(a.classList.add("pre"),e.classList.add("lock"),a.classList.add("toggle"),hamburger.open())}})},SlideShow=function(){function e(t){var a=t.target,n=t.timer,s=void 0===n?6e3:n,l=t.pause,i=void 0!==l&&l,o=t.currentIndx,r=void 0===o?0:o;_classCallCheck(this,e),Object.assign(this,{timer:s,pause:i,currentIndx:r}),this.$galleryWrapper=a,this.assembleDOMElements(),this.setEventListeners(),this.assemblePos(),this.calculateInterval()}return _createClass(e,[{key:"start",value:function(){this.countDown()}},{key:"assembleDOMElements",value:function(){var e=this,t=this.$galleryWrapper.childNodes;Array.prototype.forEach.call(t,function(t){var a=t.classList;"DIV"===t.tagName&&(a.contains("gallery")?(e.$gallery=t,e.slides=e.assembleSlides(),e.length=e.slides.length,e.indx=0):a.contains("prev")?e.$bttnPrev=t:a.contains("next")&&(e.$bttnNext=t))})}},{key:"setEventListeners",value:function(){var e=this;this.$bttnPrev.addEventListener("click",function(t){t.preventDefault(),e.changeSlide("left")}),this.$bttnNext.addEventListener("click",function(t){t.preventDefault(),e.changeSlide("right")})}},{key:"assemblePos",value:function(){var e=this.findNextSlideIndx(),t=this.slides[e];console.log("next slide",t),this.nextPos=t.getBoundingClientRect().left}},{key:"assembleSlides",value:function(){var e=this.$gallery.childNodes;return Array.prototype.filter.call(e,function(e){return"DIV"===e.tagName})}},{key:"findNextSlideIndx",value:function(){return this.indx+1<=this.length-1?this.indx+1:0}},{key:"calculateInterval",value:function(){var e=this.$gallery.getBoundingClientRect();this.offset=e.left-e.width,this.interval=(this.nextPos-this.offset-this.$gallery.scrollLeft)/20}},{key:"moveForward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1;console.log("forward triggered",this.nextPos),this.$gallery.scrollLeft+this.interval<this.nextPos-this.offset?(this.$gallery.scrollLeft+=this.interval,this.indx+=1,setTimeout(this.moveForward.bind(this,e+.1),18)):(this.$gallery.scrollLeft=this.nextPos-this.offset,this.nextPos=this.assemblePos())}},{key:"moveBackward",value:function(){console.log("this is never used",this.galleryWidth)}},{key:"changeSlide",value:function(e){switch(e){case"left":this.setPause(),this.moveBackward();break;case"right":this.setPause(),this.moveForward();break;default:this.changeSlide()}}},{key:"checkLength",value:function(){this.$gallery.scrollLeft<0?this.$gallery.scrollLeft=this.galleryWidth:this.$gallery.scrollLeft>this.galleryWidth&&(this.$gallery.scrollLeft=0)}},{key:"setPause",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6e3;this.pause||(this.pause=!0,setTimeout(function(){e.pause=!1},t))}},{key:"resetTime",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6e3;this.timer=e}},{key:"spendTime",value:function(){this.timer-=1e3}},{key:"countDown",value:function(){0===this.timer?(this.next(),this.changeSlide(),this.resetTime()):this.pause||this.spendTime(),setTimeout(this.countDown.bind(this),1e3)}},{key:"default",value:function(){var e=this;this.$gallery.addEventListener("scroll",function(){console.log("XX--\x3e",e.$gallery.scrollLeft)})}}]),e}(),initSlider=function(){var e={},t=document.getElementsByClassName("gallery-wrapper");Array.prototype.forEach.call(t,function(t){e["gal-0"]=new SlideShow({target:t}),e["gal-0"].default()})},toggleEl={add:function(e){e.classList.add("pre"),delay(function(){return e.classList.add("opacity")})},remove:function(e){e.classList.remove("opacity"),delay(function(){return e.classList.remove("pre")})},status:function(e){return e.classList.contains("pre")&&e.classList.contains("opacity")}},toggleTabs=function(){var e=document.getElementsByClassName("tabs"),t=document.getElementById("comp-schedule"),a=document.getElementById("comp-available");Array.prototype.forEach.call(e,function(n){n.addEventListener("click",function(s){s.preventDefault(),Array.prototype.forEach.call(e,function(e){e.classList.remove("tabbed")}),n.classList.contains("schedule-link")?toggleEl.status(t)?toggleEl.remove(t):(toggleEl.remove(a),toggleEl.add(t),n.classList.add("tabbed")):n.classList.contains("available-link")&&(toggleEl.status(a)?toggleEl.remove(a):(toggleEl.remove(t),toggleEl.add(a),n.classList.add("tabbed")))})})};document.onreadystatechange=function(){"complete"===document.readyState&&(navEvent(),initSlider(),toggleTabs())};